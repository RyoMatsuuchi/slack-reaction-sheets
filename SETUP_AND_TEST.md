# セットアップと動作確認手順

## 1. 環境構築

### 必要な環境変数の設定
```bash
# .envファイルに以下の項目を設定
SLACK_BOT_TOKEN=xoxb-...       # Slackボットトークン
SLACK_SIGNING_SECRET=...       # Slackアプリの署名シークレット
GOOGLE_SPREADSHEET_ID=...      # 転記先のスプレッドシートID
GOOGLE_SERVICE_ACCOUNT_KEY=... # サービスアカウントのJSONキー
```

### アプリケーションのビルドと起動
```bash
# 依存パッケージのインストール
npm install

# アプリケーションのビルド
npm run build

# アプリケーションの起動（本番モード）
npm start

# または開発モードでの起動（ホットリロード有効）
npm run dev
```

## 2. 動作確認手順

### Slackでの確認
1. ボットユーザーを任意のチャンネルに招待
   ```
   /invite @[ボット名]
   ```

2. テストメッセージを投稿
   ```
   テストメッセージ
   ```

3. メッセージにチェックマーク（✅）リアクションを追加

### スプレッドシートでの確認
1. 指定したスプレッドシートを開く
2. 新しい行が追加されていることを確認
   - 発生日時
   - Slackリンク
   - メッセージ内容

## 3. トラブルシューティング

### ログの確認
- アプリケーションの起動ログを確認
- エラーメッセージの有無を確認
- Slack APIのレスポンスを確認

### よくある問題と解決方法

1. アプリケーションが起動しない
   - 環境変数の設定を確認
   - ポート番号の競合がないか確認

2. Slackイベントを受信できない
   - ボットトークンとシークレットの正確性を確認
   - Slackアプリの権限設定を確認
   - ボットユーザーがチャンネルに参加しているか確認

3. スプレッドシートに書き込めない
   - サービスアカウントの権限を確認
   - スプレッドシートIDの正確性を確認
   - スプレッドシートへのアクセス権限を確認

### デバッグモード
詳細なログを有効にする場合：
```bash
# .envファイルで設定
LOG_LEVEL=debug
```

## 4. 動作確認チェックリスト

- [ ] アプリケーションが正常に起動する
- [ ] Slackでリアクションを付けられる
- [ ] スプレッドシートに新しい行が追加される
- [ ] 追加された行の内容が正確
- [ ] Slackメッセージへのリンクが機能する
- [ ] エラー発生時にログが出力される